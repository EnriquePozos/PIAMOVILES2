<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F9FF"
    android:orientation="vertical"
    tools:context=".PostDetailActivity">

    <!-- Header reutilizable con botón de regreso -->
    <include
        android:id="@+id/headerApp"
        layout="@layout/header_app" />

    <!-- Contenido principal con scroll -->
    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:fillViewport="true">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical">

            <!-- Imágenes de la publicación (múltiples, apiladas verticalmente) -->
            <FrameLayout
                android:id="@+id/layoutMediaCarousel"
                android:layout_width="match_parent"
                android:layout_height="300dp"
                android:layout_margin="16dp"
                android:background="#E0E0E0">

                <!-- ViewPager2 para el carrusel -->
                <androidx.viewpager2.widget.ViewPager2
                    android:id="@+id/vpMediaCarousel"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" />

                <!-- Botón anterior (flecha izquierda) -->
                <ImageButton
                    android:id="@+id/btnPrevMedia"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_gravity="start|center_vertical"
                    android:layout_marginStart="8dp"
                    android:background="@drawable/circle_background"
                    android:backgroundTint="#80000000"
                    android:src="@android:drawable/ic_media_previous"
                    android:contentDescription="Anterior"
                    android:visibility="gone"
                    app:tint="#FFFFFF" />

                <!-- Botón siguiente (flecha derecha) -->
                <ImageButton
                    android:id="@+id/btnNextMedia"
                    android:layout_width="48dp"
                    android:layout_height="48dp"
                    android:layout_gravity="end|center_vertical"
                    android:layout_marginEnd="8dp"
                    android:background="@drawable/circle_background"
                    android:backgroundTint="#80000000"
                    android:src="@android:drawable/ic_media_next"
                    android:contentDescription="Siguiente"
                    android:visibility="gone"
                    app:tint="#FFFFFF" />

                <!-- Indicador de página (dots) -->
                <LinearLayout
                    android:id="@+id/layoutPageIndicator"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="bottom|center_horizontal"
                    android:layout_marginBottom="16dp"
                    android:orientation="horizontal"
                    android:visibility="gone" />

                <!-- Badge de contador (ej: "1/3") -->
                <TextView
                    android:id="@+id/tvMediaCounter"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_gravity="top|end"
                    android:layout_margin="12dp"
                    android:background="@drawable/circle_background"
                    android:backgroundTint="#80000000"
                    android:paddingHorizontal="12dp"
                    android:paddingVertical="4dp"
                    android:text="1/1"
                    android:textColor="#FFFFFF"
                    android:textSize="12sp"
                    android:visibility="gone" />

            </FrameLayout>

            <!-- Botones de acción (Like/Dislike, Favoritos) -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:paddingHorizontal="16dp"
                android:paddingVertical="8dp"
                android:gravity="center_vertical">

                <!-- Botón Like (pulgar arriba) -->
                <ImageButton
                    android:id="@+id/btnLike"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:layout_marginStart="16dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_like"
                    android:rotation="0"
                    android:contentDescription="Me gusta"
                    app:tint="#666666" />

                <!-- Botón Dislike (pulgar abajo) -->
                <ImageButton
                    android:id="@+id/btnDislike"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_dislike"
                    android:rotation="0"
                    android:contentDescription="No me gusta"
                    app:tint="#666666" />

                <!-- Espaciador -->
                <View
                    android:layout_width="0dp"
                    android:layout_height="0dp"
                    android:layout_weight="1" />

                <!-- Botón Favoritos -->
                <ImageButton
                    android:id="@+id/btnFavorite"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:src="@drawable/ic_guardar"
                    android:contentDescription="Agregar a favoritos"
                    app:tint="#666666" />

            </LinearLayout>

            <!-- Información del post -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="16dp"
                android:paddingBottom="16dp">

                <!-- Título -->
                <TextView
                    android:id="@+id/tvPostTitle"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="4dp"
                    android:textColor="#000000"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    tools:text="Desayuno saludable" />

                <!-- Autor -->
                <TextView
                    android:id="@+id/tvPostAuthor"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    tools:text="Autor" />

                <!-- Descripción completa -->
                <TextView
                    android:id="@+id/tvPostDescription"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="24dp"
                    android:textColor="#333333"
                    android:textSize="14sp"
                    android:lineSpacingExtra="2dp"
                    tools:text="lorem ipsum, quia dolor sit, amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt, ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis" />

            </LinearLayout>

            <!-- Campo para agregar comentario nuevo -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="16dp"
                android:paddingBottom="16dp"
                android:background="#FFFFFF"
                android:layout_marginHorizontal="16dp"
                android:layout_marginBottom="16dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Comentar"
                    android:textColor="#333333"
                    android:textSize="14sp"
                    android:layout_marginTop="12dp"
                    android:layout_marginBottom="8dp" />

                <EditText
                    android:id="@+id/etNewComment"
                    android:layout_width="match_parent"
                    android:layout_height="80dp"
                    android:background="@drawable/edit_text_background"
                    android:hint="Value"
                    android:textSize="14sp"
                    android:textColor="#333333"
                    android:textColorHint="#B3B3B3"
                    android:gravity="top|start"
                    android:inputType="textMultiLine|textCapSentences"
                    android:layout_marginBottom="12dp" />

                <Button
                    android:id="@+id/btnSendComment"
                    android:layout_width="wrap_content"
                    android:layout_height="36dp"
                    android:text="Comentar"
                    android:textColor="#FFFFFF"
                    android:textSize="14sp"
                    android:backgroundTint="#4A7C92"
                    android:layout_gravity="start"
                    android:layout_marginBottom="12dp" />

            </LinearLayout>

            <!-- Sección de comentarios -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:paddingHorizontal="16dp">

                <!-- Título de comentarios -->
                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="16dp"
                    android:text="Comentarios"
                    android:textColor="#000000"
                    android:textSize="16sp"
                    android:textStyle="bold" />

                <!-- Lista de comentarios -->
                <androidx.recyclerview.widget.RecyclerView
                    android:id="@+id/rvComments"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:nestedScrollingEnabled="false"
                    tools:listitem="@layout/item_comment" />

            </LinearLayout>

        </LinearLayout>

    </ScrollView>

</LinearLayout>